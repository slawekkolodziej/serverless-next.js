(window.webpackJsonp=window.webpackJsonp||[]).push([[25],{81:function(e,n,t){"use strict";t.r(n),t.d(n,"frontMatter",(function(){return s})),t.d(n,"metadata",(function(){return a})),t.d(n,"rightToc",(function(){return c})),t.d(n,"default",(function(){return u}));var o=t(2),r=t(6),i=(t(0),t(95)),s={id:"awspermissions",title:"AWS Permissions",sidebar_label:"AWS Permissions"},a={unversionedId:"awspermissions",id:"awspermissions",isDocsHomePage:!1,title:"AWS Permissions",description:"By default the Lambda@Edge functions run using AWSLambdaBasicExecutionRole which only allows uploading logs to CloudWatch. If you need permissions beyond this, like for example access to DynamoDB or any other AWS resource you will need your own custom policy arn:",source:"@site/docs/awspermissions.md",slug:"/awspermissions",permalink:"/docs/awspermissions",editUrl:"https://github.com/serverless-nextjs/serverless-next.js/documentation/docs/docs/awspermissions.md",version:"current",sidebar_label:"AWS Permissions",sidebar:"someSidebar",previous:{title:"Public directory caching",permalink:"/docs/publicdirectorycache"},next:{title:"Lambda At Edge Configuration",permalink:"/docs/lambdaatedgeconfig"}},c=[],l={rightToc:c};function u(e){var n=e.components,t=Object(r.a)(e,["components"]);return Object(i.b)("wrapper",Object(o.a)({},l,t,{components:n,mdxType:"MDXLayout"}),Object(i.b)("p",null,"By default the Lambda@Edge functions run using AWSLambdaBasicExecutionRole which only allows uploading logs to CloudWatch. If you need permissions beyond this, like for example access to DynamoDB or any other AWS resource you will need your own custom policy arn:"),Object(i.b)("pre",null,Object(i.b)("code",Object(o.a)({parentName:"pre"},{className:"language-yml"}),'# serverless.yml\n\nmyNextApplication:\n  component: serverless-next.js\n  inputs:\n    policy: "arn:aws:iam::123456789012:policy/MyCustomPolicy"\n')),Object(i.b)("p",null,"Make sure you add CloudWatch log permissions to your custom policy."),Object(i.b)("p",null,"The exhaustive list of AWS actions required for a deployment:"),Object(i.b)("pre",null,Object(i.b)("code",Object(o.a)({parentName:"pre"},{}),'  "acm:DescribeCertificate", // only for custom domains\n  "acm:ListCertificates",    // only for custom domains\n  "acm:RequestCertificate",  // only for custom domains\n  "cloudfront:CreateCloudFrontOriginAccessIdentity",\n  "cloudfront:CreateDistribution",\n  "cloudfront:CreateInvalidation",\n  "cloudfront:GetDistribution",\n  "cloudfront:GetDistributionConfig",\n  "cloudfront:ListCloudFrontOriginAccessIdentities",\n  "cloudfront:ListDistributions",\n  "cloudfront:ListDistributionsByLambdaFunction",\n  "cloudfront:ListDistributionsByWebACLId",\n  "cloudfront:ListFieldLevelEncryptionConfigs",\n  "cloudfront:ListFieldLevelEncryptionProfiles",\n  "cloudfront:ListInvalidations",\n  "cloudfront:ListPublicKeys",\n  "cloudfront:ListStreamingDistributions",\n  "cloudfront:UpdateDistribution",\n  "iam:AttachRolePolicy",\n  "iam:CreateRole",\n  "iam:CreateServiceLinkedRole",\n  "iam:GetRole",\n  "iam:PassRole",\n  "lambda:CreateFunction",\n  "lambda:EnableReplication",\n  "lambda:DeleteFunction",            // only for custom domains\n  "lambda:GetFunction",\n  "lambda:GetFunctionConfiguration",\n  "lambda:PublishVersion",\n  "lambda:UpdateFunctionCode",\n  "lambda:UpdateFunctionConfiguration",\n  "route53:ChangeResourceRecordSets", // only for custom domains\n  "route53:ListHostedZonesByName",\n  "route53:ListResourceRecordSets",   // only for custom domains\n  "s3:CreateBucket",\n  "s3:GetAccelerateConfiguration",\n  "s3:GetObject",                     // only if persisting state to S3 for CI/CD\n  "s3:HeadBucket",\n  "s3:ListBucket",\n  "s3:PutAccelerateConfiguration",\n  "s3:PutBucketPolicy",\n  "s3:PutObject"\n')))}u.isMDXComponent=!0},95:function(e,n,t){"use strict";t.d(n,"a",(function(){return d})),t.d(n,"b",(function(){return f}));var o=t(0),r=t.n(o);function i(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function s(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);n&&(o=o.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,o)}return t}function a(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?s(Object(t),!0).forEach((function(n){i(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):s(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}function c(e,n){if(null==e)return{};var t,o,r=function(e,n){if(null==e)return{};var t,o,r={},i=Object.keys(e);for(o=0;o<i.length;o++)t=i[o],n.indexOf(t)>=0||(r[t]=e[t]);return r}(e,n);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(o=0;o<i.length;o++)t=i[o],n.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(r[t]=e[t])}return r}var l=r.a.createContext({}),u=function(e){var n=r.a.useContext(l),t=n;return e&&(t="function"==typeof e?e(n):a(a({},n),e)),t},d=function(e){var n=u(e.components);return r.a.createElement(l.Provider,{value:n},e.children)},m={inlineCode:"code",wrapper:function(e){var n=e.children;return r.a.createElement(r.a.Fragment,{},n)}},p=r.a.forwardRef((function(e,n){var t=e.components,o=e.mdxType,i=e.originalType,s=e.parentName,l=c(e,["components","mdxType","originalType","parentName"]),d=u(t),p=o,f=d["".concat(s,".").concat(p)]||d[p]||m[p]||i;return t?r.a.createElement(f,a(a({ref:n},l),{},{components:t})):r.a.createElement(f,a({ref:n},l))}));function f(e,n){var t=arguments,o=n&&n.mdxType;if("string"==typeof e||o){var i=t.length,s=new Array(i);s[0]=p;var a={};for(var c in n)hasOwnProperty.call(n,c)&&(a[c]=n[c]);a.originalType=e,a.mdxType="string"==typeof e?e:o,s[1]=a;for(var l=2;l<i;l++)s[l]=t[l];return r.a.createElement.apply(null,s)}return r.a.createElement.apply(null,t)}p.displayName="MDXCreateElement"}}]);